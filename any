public Map<String, B2bUtilProduct.ProductData> getSkuToProductMap(List<String> skus, Id webstoreId, String effectiveAccountId) {
    Map<String, B2bUtilProduct.ProductData> skuToProduct2Map = new Map<String, B2bUtilProduct.ProductData>();
    
    // Split SKUs into two chunks (assuming the first chunk can hold up to 500 SKUs)
    List<String> firstChunk = new List<String>();
    List<String> secondChunk = new List<String>();

    // Ensure that the first chunk has a maximum of 500 SKUs
    for (Integer i = 0; i < Math.min(500, skus.size()); i++) {
        firstChunk.add(skus[i]);
    }

    // The second chunk will have the remaining SKUs if there are more than 500
    for (Integer i = 500; i < skus.size(); i++) {
        secondChunk.add(skus[i]);
    }

    // Fetch product data for the first chunk
    List<B2bUtilProduct.ProductData> productData = B2bUtilProduct.getProductsBySku(webstoreId, effectiveAccountId, firstChunk, null, true, true, true);
    
    // If there are remaining SKUs in the second chunk, fetch them
    if (!secondChunk.isEmpty()) {
        productData.addAll(B2bUtilProduct.getProductsBySku(webstoreId, effectiveAccountId, secondChunk, null, true, true, true));
    }

    // Populate the map with SKU and corresponding product data
    for (B2bUtilProduct.ProductData product : productData) {
        skuToProduct2Map.put(B2BUtil.toUpperCase(product.SKU), product);
    }

    return skuToProduct2Map;
}
